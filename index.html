<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PartexSmartOS 16.2 Ultra - FireTV Edition</title>
<style>
/* =========== FIRETV EXAKTES DESIGN =========== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --firetv-dark: #0f1a2a;
  --firetv-card: #1a2a3a;
  --firetv-accent: #00aaff;
  --firetv-orange: #ff9900;
  --firetv-text: #ffffff;
  --firetv-text-secondary: #a0a0a0;
  --firetv-gradient: linear-gradient(135deg, #0f1a2a 0%, #1a2a3a 100%);
  --firetv-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
  --firetv-radius: 8px;
  --firetv-transition: all 0.2s ease;
}

body {
  font-family: 'Amazon Ember', Arial, sans-serif;
  background: var(--firetv-dark);
  color: var(--firetv-text);
  overflow: hidden;
  height: 100vh;
  background-image: 
    radial-gradient(circle at 20% 80%, rgba(0, 170, 255, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(255, 153, 0, 0.1) 0%, transparent 50%);
}

/* =========== TOP NAVIGATION BAR =========== */
.top-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 20px;
  background: rgba(15, 26, 42, 0.95);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1000;
}

.logo-container {
  display: flex;
  align-items: center;
  gap: 12px;
}

.firetv-logo {
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #ff9900, #ffcc00);
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: #000;
  font-size: 14px;
}

.os-name {
  font-size: 18px;
  font-weight: 500;
  letter-spacing: 0.5px;
  background: linear-gradient(90deg, #ffffff, #00aaff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.top-nav {
  display: flex;
  gap: 25px;
}

.nav-item {
  color: var(--firetv-text-secondary);
  font-size: 14px;
  cursor: pointer;
  transition: var(--firetv-transition);
  padding: 5px 10px;
  border-radius: 4px;
}

.nav-item:hover, .nav-item.active {
  color: var(--firetv-text);
  background: rgba(255, 255, 255, 0.1);
}

.system-info {
  display: flex;
  align-items: center;
  gap: 15px;
  font-size: 13px;
  color: var(--firetv-text-secondary);
}

/* =========== MAIN CONTENT LAYOUT =========== */
.main-container {
  margin-top: 60px;
  height: calc(100vh - 120px);
  padding: 20px;
  overflow-y: auto;
}

/* =========== HERO SECTION =========== */
.hero-section {
  margin-bottom: 30px;
  position: relative;
}

.hero-title {
  font-size: 28px;
  font-weight: 300;
  margin-bottom: 10px;
  color: var(--firetv-text);
}

.hero-subtitle {
  font-size: 14px;
  color: var(--firetv-text-secondary);
  margin-bottom: 20px;
}

/* =========== CONTENT ROWS (FIRETV STYLE) =========== */
.content-row {
  margin-bottom: 30px;
}

.row-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.row-title {
  font-size: 18px;
  font-weight: 500;
}

.row-nav {
  display: flex;
  gap: 10px;
}

.row-nav-btn {
  width: 30px;
  height: 30px;
  background: rgba(255, 255, 255, 0.1);
  border: none;
  border-radius: 50%;
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--firetv-transition);
}

.row-nav-btn:hover {
  background: rgba(255, 255, 255, 0.2);
}

/* =========== CONTENT CARDS =========== */
.content-cards {
  display: flex;
  gap: 15px;
  padding: 5px;
  overflow-x: auto;
  scroll-behavior: smooth;
}

.content-card {
  flex: 0 0 200px;
  height: 300px;
  background: var(--firetv-card);
  border-radius: var(--firetv-radius);
  overflow: hidden;
  cursor: pointer;
  transition: var(--firetv-transition);
  position: relative;
  border: 2px solid transparent;
}

.content-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(to bottom, transparent 50%, rgba(0, 0, 0, 0.8) 100%);
  z-index: 1;
}

.content-card.focused {
  transform: scale(1.05) translateY(-5px);
  border-color: var(--firetv-accent);
  box-shadow: 0 10px 25px rgba(0, 170, 255, 0.3);
  z-index: 10;
}

.card-image {
  width: 100%;
  height: 70%;
  object-fit: cover;
}

.card-info {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 15px;
  z-index: 2;
  background: linear-gradient(to top, rgba(0, 0, 0, 0.9), transparent);
}

.card-title {
  font-size: 16px;
  font-weight: 500;
  margin-bottom: 5px;
}

.card-subtitle {
  font-size: 12px;
  color: var(--firetv-text-secondary);
}

/* =========== APPS GRID =========== */
.apps-grid {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 20px;
  margin-top: 20px;
}

.app-card {
  background: var(--firetv-card);
  border-radius: var(--firetv-radius);
  height: 120px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: var(--firetv-transition);
  position: relative;
  border: 2px solid transparent;
}

.app-card.focused {
  transform: scale(1.1);
  border-color: var(--firetv-orange);
  box-shadow: 0 8px 20px rgba(255, 153, 0, 0.3);
  z-index: 5;
}

.app-icon {
  font-size: 36px;
  margin-bottom: 10px;
}

.app-name {
  font-size: 12px;
  text-align: center;
  padding: 0 5px;
}

/* =========== OVERLAY SCREENS =========== */
.overlay-screen {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.95);
  z-index: 2000;
  display: none;
  animation: slideUp 0.3s ease-out;
}

.overlay-screen.active {
  display: flex;
  flex-direction: column;
}

.overlay-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  background: rgba(15, 26, 42, 0.9);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.overlay-title {
  font-size: 22px;
  font-weight: 300;
}

.overlay-content {
  flex: 1;
  padding: 20px;
  overflow-y: auto;
}

/* =========== VIDEO PLAYER =========== */
.video-container {
  max-width: 1200px;
  margin: 0 auto;
  position: relative;
}

.video-player {
  width: 100%;
  height: 70vh;
  background: #000;
  border-radius: var(--firetv-radius);
}

.player-controls {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-top: 20px;
  padding: 0 20px;
}

.control-btn {
  padding: 12px 25px;
  background: var(--firetv-card);
  border: none;
  border-radius: 6px;
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  transition: var(--firetv-transition);
}

.control-btn:hover {
  background: var(--firetv-accent);
}

/* =========== APP STORE =========== */
.store-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 20px;
  padding: 20px;
}

.store-app {
  background: var(--firetv-card);
  border-radius: var(--firetv-radius);
  padding: 20px;
  text-align: center;
  cursor: pointer;
  transition: var(--firetv-transition);
  border: 2px solid transparent;
}

.store-app.focused {
  border-color: var(--firetv-accent);
  transform: translateY(-5px);
}

/* =========== SETTINGS =========== */
.settings-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 20px;
  padding: 20px;
}

.settings-card {
  background: var(--firetv-card);
  border-radius: var(--firetv-radius);
  padding: 25px;
}

.setting-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

/* =========== REMOTE CONTROLS =========== */
.remote-container {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 100;
}

.remote-btn {
  width: 60px;
  height: 60px;
  background: rgba(0, 0, 0, 0.7);
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  color: white;
  font-size: 24px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 5px;
  transition: var(--firetv-transition);
}

.remote-btn:hover {
  background: rgba(0, 170, 255, 0.7);
  border-color: var(--firetv-accent);
}

.remote-help {
  position: fixed;
  bottom: 20px;
  left: 20px;
  background: rgba(0, 0, 0, 0.8);
  padding: 15px;
  border-radius: var(--firetv-radius);
  font-size: 12px;
  color: var(--firetv-text-secondary);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* =========== ANIMATIONS =========== */
@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse {
  0%, 100% {
    box-shadow: 0 0 10px var(--firetv-accent);
  }
  50% {
    box-shadow: 0 0 20px var(--firetv-accent);
  }
}

.focused {
  animation: pulse 2s infinite;
}

/* =========== SCROLLBAR =========== */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: var(--firetv-accent);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--firetv-orange);
}

/* =========== RESPONSIVE =========== */
@media (max-width: 1200px) {
  .apps-grid {
    grid-template-columns: repeat(4, 1fr);
  }
  
  .content-card {
    flex: 0 0 180px;
    height: 270px;
  }
}

@media (max-width: 768px) {
  .apps-grid {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .content-card {
    flex: 0 0 160px;
    height: 240px;
  }
  
  .top-nav {
    display: none;
  }
}
</style>
</head>
<body>
<!-- TOP NAVIGATION BAR -->
<div class="top-bar">
  <div class="logo-container">
    <div class="firetv-logo">P</div>
    <div class="os-name">PartexSmartOS 16.2</div>
  </div>
  
  <div class="top-nav">
    <div class="nav-item active">Start</div>
    <div class="nav-item">Filme</div>
    <div class="nav-item">Serien</div>
    <div class="nav-item">Apps</div>
    <div class="nav-item">Einstellungen</div>
  </div>
  
  <div class="system-info">
    <span id="current-time">19:30</span>
    <span>üîä 65%</span>
    <span>üì∂ Gut</span>
  </div>
</div>

<!-- MAIN CONTENT -->
<div class="main-container">
  <!-- HERO SECTION -->
  <div class="hero-section">
    <div class="hero-title">Willkommen zur√ºck</div>
    <div class="hero-subtitle">Empfohlen f√ºr dich ‚Ä¢ Beliebte Inhalte ‚Ä¢ Neu hinzugef√ºgt</div>
  </div>

  <!-- RECOMMENDED ROW -->
  <div class="content-row">
    <div class="row-header">
      <div class="row-title">Empfohlene f√ºr dich</div>
      <div class="row-nav">
        <button class="row-nav-btn">‚Üê</button>
        <button class="row-nav-btn">‚Üí</button>
      </div>
    </div>
    <div class="content-cards" id="recommendedRow">
      <!-- Cards werden via JS geladen -->
    </div>
  </div>

  <!-- CONTINUE WATCHING -->
  <div class="content-row">
    <div class="row-header">
      <div class="row-title">Weiter schauen</div>
    </div>
    <div class="content-cards" id="continueRow">
      <!-- Cards werden via JS geladen -->
    </div>
  </div>

  <!-- APPS GRID -->
  <div class="content-row">
    <div class="row-header">
      <div class="row-title">Deine Apps</div>
    </div>
    <div class="apps-grid" id="appsGrid">
      <!-- Apps werden via JS geladen -->
    </div>
  </div>

  <!-- MOVIES ROW -->
  <div class="content-row">
    <div class="row-header">
      <div class="row-title">Beliebte Filme</div>
    </div>
    <div class="content-cards" id="moviesRow">
      <!-- Cards werden via JS geladen -->
    </div>
  </div>
</div>

<!-- REMOTE CONTROLS -->
<div class="remote-container">
  <button class="remote-btn" onclick="handleRemote('back')">‚Üê</button>
  <div style="display: flex; justify-content: center;">
    <button class="remote-btn" onclick="handleRemote('up')">‚Üë</button>
  </div>
  <div style="display: flex; gap: 70px;">
    <button class="remote-btn" onclick="handleRemote('left')">‚Üê</button>
    <button class="remote-btn" onclick="handleRemote('right')">‚Üí</button>
  </div>
  <div style="display: flex; justify-content: center;">
    <button class="remote-btn" onclick="handleRemote('down')">‚Üì</button>
  </div>
  <button class="remote-btn" style="background: var(--firetv-orange);" onclick="handleRemote('select')">OK</button>
</div>

<!-- REMOTE HELP -->
<div class="remote-help">
  <div>‚Üê ‚Üí Navigation</div>
  <div>OK Auswahl</div>
  <div>Backspace Zur√ºck</div>
  <div>Leertaste Play/Pause</div>
</div>

<!-- VIDEO PLAYER OVERLAY -->
<div id="videoOverlay" class="overlay-screen">
  <div class="overlay-header">
    <div class="overlay-title" id="videoTitle">Video Player</div>
    <button class="control-btn" onclick="closeOverlay()">
      <span>‚úï</span> Schlie√üen
    </button>
  </div>
  <div class="overlay-content">
    <div class="video-container">
      <video id="videoPlayer" class="video-player" controls>
        <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
      </video>
      <div class="player-controls">
        <button class="control-btn" onclick="videoControl('play')">
          <span>‚ñ∂Ô∏è</span> Play
        </button>
        <button class="control-btn" onclick="videoControl('pause')">
          <span>‚è∏Ô∏è</span> Pause
        </button>
        <button class="control-btn" onclick="videoControl('skip+30')">
          <span>‚è≠Ô∏è</span> +30s
        </button>
        <button class="control-btn" onclick="videoControl('skip-30')">
          <span>‚èÆÔ∏è</span> -30s
        </button>
        <button class="control-btn" onclick="videoControl('mute')">
          <span>üîá</span> Stummtaste
        </button>
      </div>
    </div>
  </div>
</div>

<!-- APP STORE OVERLAY -->
<div id="storeOverlay" class="overlay-screen">
  <div class="overlay-header">
    <div class="overlay-title">App Store</div>
    <button class="control-btn" onclick="closeOverlay()">
      <span>‚úï</span> Schlie√üen
    </button>
  </div>
  <div class="overlay-content">
    <div class="store-grid" id="storeApps">
      <!-- Apps werden via JS geladen -->
    </div>
  </div>
</div>

<!-- SETTINGS OVERLAY -->
<div id="settingsOverlay" class="overlay-screen">
  <div class="overlay-header">
    <div class="overlay-title">Einstellungen</div>
    <button class="control-btn" onclick="closeOverlay()">
      <span>‚úï</span> Schlie√üen
    </button>
  </div>
  <div class="overlay-content">
    <div class="settings-grid">
      <div class="settings-card">
        <h3 style="margin-bottom: 20px;">Anzeige & Ton</h3>
        <div class="setting-item">
          <span>Helligkeit</span>
          <input type="range" min="0" max="100" value="75" style="width: 150px;">
        </div>
        <div class="setting-item">
          <span>Lautst√§rke</span>
          <div style="display: flex; align-items: center; gap: 10px;">
            <button onclick="changeVolume(-10)">-</button>
            <span id="volumeValue">75%</span>
            <button onclick="changeVolume(10)">+</button>
          </div>
        </div>
        <div class="setting-item">
          <span>Theme</span>
          <select style="background: var(--firetv-card); color: white; padding: 5px; border-radius: 4px;">
            <option>Dunkel</option>
            <option>Hell</option>
          </select>
        </div>
      </div>
      
      <div class="settings-card">
        <h3 style="margin-bottom: 20px;">System</h3>
        <div class="setting-item">
          <span>Wi-Fi</span>
          <span style="color: #2ecc71;">Verbunden</span>
        </div>
        <div class="setting-item">
          <span>Speicher</span>
          <span>12.3 GB frei</span>
        </div>
        <div class="setting-item">
          <span>System-Update</span>
          <button class="control-btn" style="padding: 5px 15px; font-size: 12px;">
            √úberpr√ºfen
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- YOUTUBE OVERLAY -->
<div id="youtubeOverlay" class="overlay-screen">
  <div class="overlay-header">
    <div class="overlay-title">YouTube</div>
    <div style="flex: 1; margin: 0 20px;">
      <input type="text" id="youtubeSearch" placeholder="YouTube durchsuchen..." 
             style="width: 100%; padding: 10px; background: var(--firetv-card); 
                    color: white; border: 1px solid rgba(255,255,255,0.2); 
                    border-radius: 4px;">
    </div>
    <button class="control-btn" onclick="searchYouTube()">
      <span>üîç</span> Suchen
    </button>
    <button class="control-btn" onclick="closeOverlay()">
      <span>‚úï</span> Schlie√üen
    </button>
  </div>
  <div class="overlay-content">
    <iframe id="youtubeFrame" 
            style="width: 100%; height: 100%; border: none; border-radius: var(--firetv-radius);"
            src="https://www.youtube.com/embed?autoplay=1&mute=0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen>
    </iframe>
  </div>
</div>

<script>
// =========== FIRETV OS KERNEL ===========
class FireTVOS {
  constructor() {
    this.currentScreen = 'home';
    this.currentFocus = { row: 0, col: 0 };
    this.currentRow = 'apps';
    this.rows = ['apps', 'recommended', 'continue', 'movies'];
    this.navigationStack = [];
    this.volume = 75;
    this.videoPlaying = false;
    
    // Navigation Maps
    this.navMap = {
      'home': { up: null, down: 'apps', left: null, right: 'recommended' },
      'apps': { up: 'home', down: null, left: null, right: null },
      'recommended': { up: null, down: null, left: 'home', right: 'continue' },
      'continue': { up: null, down: null, left: 'recommended', right: 'movies' },
      'movies': { up: null, down: null, left: 'continue', right: null }
    };
    
    this.apps = [];
    this.recommendedContent = [];
    this.movies = [];
    this.continueWatching = [];
    
    this.init();
  }

  init() {
    this.loadData();
    this.setupEventListeners();
    this.updateTime();
    setInterval(() => this.updateTime(), 60000);
    
    // Start with focus on first app
    setTimeout(() => {
      this.focusElement('appsGrid', 0);
    }, 100);
  }

  loadData() {
    // Apps
    this.apps = [
      { id: 'youtube', name: 'YouTube', icon: '‚ñ∂Ô∏è', color: '#ff0000' },
      { id: 'netflix', name: 'Netflix', icon: 'N', color: '#e50914' },
      { id: 'prime', name: 'Prime Video', icon: 'P', color: '#00a8e1' },
      { id: 'disney', name: 'Disney+', icon: 'D', color: '#0063e5' },
      { id: 'browser', name: 'Browser', icon: 'üåê', color: '#4285f4' },
      { id: 'settings', name: 'Einstellungen', icon: '‚öôÔ∏è', color: '#666666' },
      { id: 'store', name: 'App Store', icon: 'üõí', color: '#ff9900' },
      { id: 'media', name: 'Medien', icon: 'üé¨', color: '#9b59b6' },
      { id: 'music', name: 'Musik', icon: 'üéµ', color: '#1db954' },
      { id: 'games', name: 'Spiele', icon: 'üéÆ', color: '#00ff88' },
      { id: 'weather', name: 'Wetter', icon: 'üå§Ô∏è', color: '#3498db' },
      { id: 'calculator', name: 'Rechner', icon: 'üßÆ', color: '#2ecc71' }
    ];

    // Recommended Content
    this.recommendedContent = [
      { title: 'Action Thriller', subtitle: 'Neu', image: 'https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=400&h=225&fit=crop', video: 'https://www.w3schools.com/html/mov_bbb.mp4' },
      { title: 'Sci-Fi Serie', subtitle: 'Staffel 3', image: 'https://images.unsplash.com/photo-1533616688419-b7a585564f70?w=400&h=225&fit=crop', video: 'https://www.w3schools.com/html/movie.mp4' },
      { title: 'Dokumentation', subtitle: 'Nature', image: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=225&fit=crop', video: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4' },
      { title: 'Kom√∂die Special', subtitle: '2024', image: 'https://images.unsplash.com/photo-1489599809516-9827b6d1cf13?w=400&h=225&fit=crop', video: 'https://www.w3schools.com/html/mov_bbb.mp4' },
      { title: 'Krimi Drama', subtitle: 'Mystery', image: 'https://images.unsplash.com/photo-1531259683007-016a7b628fc3?w=400&h=225&fit=crop', video: 'https://www.w3schools.com/html/movie.mp4' }
    ];

    // Movies
    this.movies = [
      { title: 'Blockbuster Hit', subtitle: 'Action ‚Ä¢ 2h 15m', image: 'https://images.unsplash.com/photo-1517604931442-7e0c8ed2963c?w=400&h=225&fit=crop', video: 'https://www.w3schools.com/html/mov_bbb.mp4' },
      { title: 'Family Movie', subtitle: 'Animation ‚Ä¢ 1h 45m', image: 'https://images.unsplash.com/photo-1574267432553-4b4628081c31?w=400&h=225&fit=crop', video: 'https://www.w3schools.com/html/movie.mp4' },
      { title: 'Romantic Comedy', subtitle: 'Kom√∂die ‚Ä¢ 1h 55m', image: 'https://images.unsplash.com/photo-1489599809516-9827b6d1cf13?w=400&h=225&fit=crop', video: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4' },
      { title: 'Horror Night', subtitle: 'Horror ‚Ä¢ 1h 40m', image: 'https://images.unsplash.com/photo-1531259683007-016a7b628fc3?w=400&h=225&fit=crop', video: 'https://www.w3schools.com/html/mov_bbb.mp4' }
    ];

    // Continue Watching
    this.continueWatching = [
      { title: 'Letzte Episode', subtitle: 'Fortsetzen bei 45:20', image: 'https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=400&h=225&fit=crop', video: 'https://www.w3schools.com/html/mov_bbb.mp4', progress: 65 },
      { title: 'Dokumentation', subtitle: 'Fortsetzen bei 22:10', image: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=225&fit=crop', video: 'https://www.w3schools.com/html/movie.mp4', progress: 45 }
    ];

    this.renderContent();
  }

  renderContent() {
    // Render Apps
    const appsGrid = document.getElementById('appsGrid');
    appsGrid.innerHTML = '';
    this.apps.forEach((app, index) => {
      const appCard = document.createElement('div');
      appCard.className = 'app-card';
      appCard.dataset.index = index;
      appCard.dataset.id = app.id;
      appCard.style.background = app.color;
      
      appCard.innerHTML = `
        <div class="app-icon">${app.icon}</div>
        <div class="app-name">${app.name}</div>
      `;
      
      appCard.addEventListener('click', () => this.openApp(app.id));
      appsGrid.appendChild(appCard);
    });

    // Render Recommended
    this.renderRow('recommendedRow', this.recommendedContent);
    
    // Render Continue Watching
    this.renderRow('continueRow', this.continueWatching, true);
    
    // Render Movies
    this.renderRow('moviesRow', this.movies);
    
    // Render Store Apps
    this.renderStoreApps();
  }

  renderRow(rowId, items, showProgress = false) {
    const row = document.getElementById(rowId);
    row.innerHTML = '';
    
    items.forEach((item, index) => {
      const card = document.createElement('div');
      card.className = 'content-card';
      card.dataset.index = index;
      card.dataset.video = item.video;
      card.dataset.title = item.title;
      
      card.innerHTML = `
        <img src="${item.image}" alt="${item.title}" class="card-image">
        <div class="card-info">
          <div class="card-title">${item.title}</div>
          <div class="card-subtitle">${item.subtitle}</div>
          ${showProgress ? `<div style="height: 3px; background: #666; margin-top: 5px; border-radius: 2px;">
            <div style="width: ${item.progress}%; height: 100%; background: var(--firetv-accent); border-radius: 2px;"></div>
          </div>` : ''}
        </div>
      `;
      
      card.addEventListener('click', () => this.playVideo(item.video, item.title));
      row.appendChild(card);
    });
  }

  renderStoreApps() {
    const storeGrid = document.getElementById('storeApps');
    if (!storeGrid) return;
    
    const storeApps = [
      { name: 'Spotify', icon: 'üéµ', desc: 'Musik Streaming' },
      { name: 'Twitch', icon: 'üì∫', desc: 'Live Streaming' },
      { name: 'HBO Max', icon: 'H', desc: 'Filme & Serien' },
      { name: 'Plex', icon: 'P', desc: 'Medien Server' },
      { name: 'Kodi', icon: 'K', desc: 'Media Center' },
      { name: 'VLC', icon: 'V', desc: 'Media Player' }
    ];
    
    storeGrid.innerHTML = '';
    storeApps.forEach(app => {
      const appEl = document.createElement('div');
      appEl.className = 'store-app';
      appEl.innerHTML = `
        <div style="font-size: 48px; margin-bottom: 15px;">${app.icon}</div>
        <h3 style="margin-bottom: 5px;">${app.name}</h3>
        <p style="font-size: 12px; opacity: 0.8; margin-bottom: 15px;">${app.desc}</p>
        <button class="control-btn" style="padding: 8px 20px; font-size: 12px;">Installieren</button>
      `;
      storeGrid.appendChild(appEl);
    });
  }

  focusElement(elementId, index) {
    // Remove focus from all
    document.querySelectorAll('.app-card.focused, .content-card.focused, .store-app.focused').forEach(el => {
      el.classList.remove('focused');
    });
    
    // Add focus to target
    const elements = document.querySelectorAll(`.${elementId}`);
    if (elements[index]) {
      elements[index].classList.add('focused');
      elements[index].scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
    }
  }

  navigate(direction) {
    const currentNav = this.navMap[this.currentRow];
    if (currentNav && currentNav[direction]) {
      this.currentRow = currentNav[direction];
      this.updateFocus();
      return true;
    }
    return false;
  }

  updateFocus() {
    // Update UI based on current row
    document.querySelectorAll('.row-title').forEach(title => {
      title.style.color = title.textContent.includes(this.getRowName(this.currentRow)) 
        ? 'var(--firetv-accent)' 
        : 'white';
    });
  }

  getRowName(key) {
    const names = {
      'apps': 'Deine Apps',
      'recommended': 'Empfohlene f√ºr dich',
      'continue': 'Weiter schauen',
      'movies': 'Beliebte Filme'
    };
    return names[key] || key;
  }

  openApp(appId) {
    this.navigationStack.push({ screen: this.currentScreen, row: this.currentRow });
    
    switch(appId) {
      case 'youtube':
        this.showOverlay('youtubeOverlay');
        break;
      case 'settings':
        this.showOverlay('settingsOverlay');
        break;
      case 'store':
        this.showOverlay('storeOverlay');
        break;
      case 'media':
        this.playVideo('https://www.w3schools.com/html/mov_bbb.mp4', 'Beispiel Video');
        break;
      case 'browser':
        alert('Browser w√ºrde hier ge√∂ffnet werden');
        break;
      default:
        alert(`${this.apps.find(a => a.id === appId)?.name} wird ge√∂ffnet`);
    }
  }

  playVideo(videoUrl, title) {
    const player = document.getElementById('videoPlayer');
    const titleEl = document.getElementById('videoTitle');
    
    player.src = videoUrl;
    titleEl.textContent = title;
    this.showOverlay('videoOverlay');
    
    setTimeout(() => {
      player.play().catch(e => console.log('Auto-play blockiert:', e));
    }, 500);
  }

  showOverlay(overlayId) {
    document.querySelectorAll('.overlay-screen').forEach(overlay => {
      overlay.classList.remove('active');
    });
    document.getElementById(overlayId).classList.add('active');
    this.currentScreen = overlayId;
  }

  closeOverlay() {
    document.querySelectorAll('.overlay-screen').forEach(overlay => {
      overlay.classList.remove('active');
    });
    this.currentScreen = 'home';
    
    const videoPlayer = document.getElementById('videoPlayer');
    if (videoPlayer) {
      videoPlayer.pause();
    }
    
    // Restore previous navigation state
    if (this.navigationStack.length > 0) {
      const prev = this.navigationStack.pop();
      this.currentRow = prev.row;
      this.updateFocus();
    }
  }

  handleKeyPress(key) {
    if (this.currentScreen !== 'home') {
      // Handle keys in overlay
      switch(key) {
        case 'Escape':
        case 'Backspace':
          this.closeOverlay();
          break;
        case ' ':
          this.videoControl('playpause');
          break;
      }
      return;
    }
    
    // Handle home screen navigation
    switch(key) {
      case 'ArrowRight':
        this.navigate('right');
        break;
      case 'ArrowLeft':
        this.navigate('left');
        break;
      case 'ArrowUp':
        this.navigate('up');
        break;
      case 'ArrowDown':
        this.navigate('down');
        break;
      case 'Enter':
        this.selectCurrent();
        break;
    }
  }

  selectCurrent() {
    // Get currently focused element and trigger click
    const focused = document.querySelector('.focused');
    if (focused) {
      focused.click();
    }
  }

  videoControl(action) {
    const player = document.getElementById('videoPlayer');
    if (!player) return;
    
    switch(action) {
      case 'play':
        player.play();
        break;
      case 'pause':
        player.pause();
        break;
      case 'playpause':
        player.paused ? player.play() : player.pause();
        break;
      case 'skip+30':
        player.currentTime += 30;
        break;
      case 'skip-30':
        player.currentTime = Math.max(0, player.currentTime - 30);
        break;
      case 'mute':
        player.muted = !player.muted;
        break;
    }
  }

  changeVolume(delta) {
    this.volume = Math.max(0, Math.min(100, this.volume + delta));
    document.getElementById('volumeValue').textContent = `${this.volume}%`;
    
    // Update system display
    const volIcon = this.volume === 0 ? 'üîà' : this.volume < 30 ? 'üîâ' : 'üîä';
    document.querySelector('.system-info').children[1].textContent = `${volIcon} ${this.volume}%`;
  }

  searchYouTube() {
    const query = document.getElementById('youtubeSearch').value;
    if (query) {
      const encodedQuery = encodeURIComponent(query);
      document.getElementById('youtubeFrame').src = 
        `https://www.youtube.com/embed?autoplay=1&list=search?query=${encodedQuery}`;
    }
  }

  updateTime() {
    const now = new Date();
    const timeString = now.toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit' });
    document.getElementById('current-time').textContent = timeString;
  }

  setupEventListeners() {
    // Keyboard Navigation
    document.addEventListener('keydown', (e) => {
      e.preventDefault();
      this.handleKeyPress(e.key);
    });

    // Remote Control Handlers (exposed globally)
    window.handleRemote = (action) => {
      const keyMap = {
        'up': 'ArrowUp',
        'down': 'ArrowDown',
        'left': 'ArrowLeft',
        'right': 'ArrowRight',
        'select': 'Enter',
        'back': 'Escape'
      };
      
      if (keyMap[action]) {
        this.handleKeyPress(keyMap[action]);
      }
    };

    window.closeOverlay = () => this.closeOverlay();
    window.videoControl = (action) => this.videoControl(action);
    window.changeVolume = (delta) => this.changeVolume(delta);
    window.searchYouTube = () => this.searchYouTube();
  }
}

// =========== INITIALIZE FIRETV OS ===========
document.addEventListener('DOMContentLoaded', () => {
  const fireTV = new FireTVOS();
  window.fireTV = fireTV; // Expose for debugging
  
  // Auto-focus first app
  setTimeout(() => {
    const firstApp = document.querySelector('.app-card');
    if (firstApp) {
      firstApp.classList.add('focused');
    }
  }, 300);
});
</script>
</body>
</html>
